{% extends "tg-mini-app/base.html" %}
{% load tz %}
{% load humanize %}
{% load i18n %}
{% load static %}
{% block content %}
<div class="app_page text_center">
    <div class="rounded_sections_container">
        <div class="d_flex">
            <div class="input_block mb_0 me_16px" style="position: relative;width: calc(100% - 40px)">
                <svg width="20" height="20" class="svg_gray_color" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="position:absolute; top:12px; left:9px;">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M9.11414 3.89998C5.68183 3.89998 2.90001 6.6812 2.90001 10.1112C2.90001 13.5413 5.68183 16.3225 9.11414 16.3225C10.8312 16.3225 12.3842 15.6276 13.5098 14.5017C14.6344 13.3768 15.3283 11.8258 15.3283 10.1112C15.3283 6.6812 12.5465 3.89998 9.11414 3.89998ZM1.10001 10.1112C1.10001 5.6864 4.6884 2.09998 9.11414 2.09998C13.5399 2.09998 17.1283 5.6864 17.1283 10.1112C17.1283 11.9983 16.4747 13.734 15.3829 15.1027L20.6368 20.364C20.9881 20.7157 20.9877 21.2856 20.636 21.6368C20.2842 21.988 19.7144 21.9876 19.3632 21.6359L14.1102 16.3756C12.7405 17.4684 11.0031 18.1225 9.11414 18.1225C4.6884 18.1225 1.10001 14.5361 1.10001 10.1112Z"/>
                </svg>
                <input type="text" name="search" class="br_12px" style="padding-left: 33px" value="{{ request.GET.search }}" placeholder="{% translate 'search' %}">
            </div>
            <a href="#" class="d_flex">
                <img src="{{ bot_user.photo_url }}" alt="" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
            </a>
        </div>
        {% for lot in lots %}
        <div class="rounded_section p_4px justify_items_left mt_16px">
            <div style="background-image: url('{{ lot.get_main_image_url }}'); height: 100px; width: 25%; background-size: cover; border-radius: 16px; background-repeat: no-repeat; background-position: center">
            </div>
            <div class="ms_8px text_left position_relative" style="width: 75%">
                <div class="mt_4px two_line_ellipse">{{ lot.title }}</div>
                <div class="fs_14px mt_4px">
                    <span class="muted_color">{{ lot.natural_created_at }} â€¢</span>
                    {% if lot.offers_count > 0 %}
                    <span class="purple_color fw_600">
                        {% blocktrans count lot.offers_count as counter %}{{ counter }} offer{% plural %}{{ counter }} offers{% endblocktrans %}
                    </span>
                    {% else %}
                    <span class="muted_color fw_600">
                        {% trans "no offers" %}
                    </span>
                    {% endif %}
                </div>
                <div class="fs_18px position_absolute" style="bottom: 4px">
                    {% if lot.max_price %}
                    {% blocktranslate with max_price=lot.max_price|floatformat|intcomma %}up to <span class="fw_600">{{ max_price }} UZS</span>{% endblocktranslate %}
                    {% else %}
                    <span class="badge bg_gray black_color">{% trans 'open to offers' %}</span>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}