{% extends "tg-mini-app/base.html" %}
{% load svg_tags %}
{% load i18n %}
{% block content %}
<div class="app_page pb_0px">
{#    <form method="get">#}
{#    <div class="d_flex w-100">#}
{#            <div class="input_block mb_0 px_16px pt_16px" style="position: relative;">#}
{#                <svg width="20" height="20" class="svg_gray_color" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="position:absolute; top:25px; left:25px;">#}
{#                <path fill-rule="evenodd" clip-rule="evenodd" d="M9.11414 3.89998C5.68183 3.89998 2.90001 6.6812 2.90001 10.1112C2.90001 13.5413 5.68183 16.3225 9.11414 16.3225C10.8312 16.3225 12.3842 15.6276 13.5098 14.5017C14.6344 13.3768 15.3283 11.8258 15.3283 10.1112C15.3283 6.6812 12.5465 3.89998 9.11414 3.89998ZM1.10001 10.1112C1.10001 5.6864 4.6884 2.09998 9.11414 2.09998C13.5399 2.09998 17.1283 5.6864 17.1283 10.1112C17.1283 11.9983 16.4747 13.734 15.3829 15.1027L20.6368 20.364C20.9881 20.7157 20.9877 21.2856 20.636 21.6368C20.2842 21.988 19.7144 21.9876 19.3632 21.6359L14.1102 16.3756C12.7405 17.4684 11.0031 18.1225 9.11414 18.1225C4.6884 18.1225 1.10001 14.5361 1.10001 10.1112Z"/>#}
{#                </svg>#}
{#                <input type="text" name="search" class="br_12px" style="padding-left: 33px" value="{{ request.GET.search }}" placeholder="{% translate 'search' %}">#}
{#            </div>#}
{#    </div>#}
{#    </form>#}
    <div class="rounded_section rounded_section_with_label section_with_list br_0" style="min-height: calc(100vh)">
        <div class="list_section_label">{% translate 'Select a region' %}</div>
        <ul>
            {% if request.GET.parent %}
                <li>
                    <a href="{% url 'tg_select_region' %}?location_type={{ request.GET.location_type }}">
                        <div class="list_item_text ps_12px muted_color">
                            {% render_svg "angle_left" size="20" svg_class="svg_gray_color" %}
                            {% trans "Back" %}
                        </div>
                    </a>
                </li>
            {% endif %}
            {% for region in regions %}
                <li>
                    <a href="?location_type={{ request.GET.location_type }}&{% if region.sub_regions_count > 0  %}parent={{ region.id }}{% else %}select={{ region.id }}{% endif %}">
                        <div class="list_item_text ps_12px">
                            <div class="d_flex align_items_center">
                                {% render_svg "location_dot" size="15" svg_class="svg_gray_color me_4px" %}
                                {{ region.get_name }}
                            </div>
                            {% if region.sub_regions_count > 0 %}
                            <div class="section_counter">
                                <div>

                                </div>
                                {% render_svg "angle_right" %}
                            </div>
                            {% endif %}
                        </div>
                    </a>
                </li>
            {% empty %}
                <li>
                    <div class="text_center muted_color" style="width: 100%; padding: 64px 0">
                        {% translate "Nothing was found" %}
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>
<script>
if (TelegramData.MainButton) {
  TelegramData.MainButton.hide();
}
</script>
{% endblock %}